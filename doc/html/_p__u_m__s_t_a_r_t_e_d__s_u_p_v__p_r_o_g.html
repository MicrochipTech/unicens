<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>UNICENS: Supervisor Programming Mode</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="style_html.css" rel="stylesheet" type="text/css" />
<link href="INICInterfaceSpecification.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="GlobalWrapper">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td><a href="index.html"><img alt="Logo" src="logo.png"/></a></td>
  <td>
   <div id="projectname">UNICENS&#160;<span id="projectnumber">V2.3.0-4567</span></div>
   <div id="projectbrief">User Manual and API Reference</div>
    <div id="searchbox">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_p__u_m__s_t_a_r_t_e_d__s_u_p_v__p_r_o_g.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Supervisor Programming Mode </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Introduction</h1>
<p>When entering the Supervisor Programming Mode the Supervisor is responsible to run a certain sequence which allows to program the local INIC or remote INICs. The Supervisor supports the following information to be written to an INIC:</p>
<ul>
<li>INIC Configuration String</li>
<li>INIC Identification String</li>
<li>INIC Patch String</li>
</ul>
<h1>Initialization</h1>
<p>It is not possible to configure the <a class="el" href="_p__u_m__s_t_a_r_t_e_d__s_u_p_v__p_r_o_g.html">Supervisor Programming Mode</a> as initial Supervisor Mode. I.e. the application may set the <a class="el" href="_p__u_m__s_t_a_r_t_e_d__s_u_p_v__i_n_a_c_t_i_v_e.html">Supervisor Inactive Mode</a> as initial mode and may call <a class="el" href="group___g___u_c_s___s_u_p_v_ga4b0d0925415cb934500bf71a53d5a5be.html#ga4b0d0925415cb934500bf71a53d5a5be" title="Sets the Network Supervisor to a new operation mode.">Ucs_Supv_SetMode()</a> to start the Supervisor Programming Mode. The application should assign the following callback functions which are dedicated to the Programming Mode:</p>
<ul>
<li><a class="el" href="struct_ucs___supv___init_data__t.html">supv.prog_event_fptr</a> <br/>
 This callback function notifies certain events that can occur during local or remote programming. The events are necessary especially for remote programming.</li>
<li><a class="el" href="struct_ucs___supv___init_data__t.html">supv.prog_local_fptr</a> <br/>
 The application must assign this callback function to run the programming of the local INIC. The Network Supervisor invokes this callback function as the first one notifying the signature of the local INIC. The network is now in state "NotAvailable" and the application can trigger from within this callback function to program the local INIC. If this callback function is not assigned, the Supervisor immediately starts the procedure for remote programming.</li>
<li><a class="el" href="struct_ucs___supv___init_data__t.html">supv.prog_signature_fptr</a> <br/>
 After the Network Supervisor has started the network it will discover the remote INICs and notify the signatures of the remote INICs to the application. The application must gather enough information to determine which remote INICs must be programmed.</li>
</ul>
<p>The following example shows how to configure the Network Supervisor to start in Supervisor Inactive Mode and assign callback functions required for the Supervisor Programming Mode. </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> App_Initialize(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="struct_ucs___init_data__t.html" title="UNICENS initialization structure used by function Ucs_Init().">Ucs_InitData_t</a> init_data;</div>
<div class="line">    <a class="code" href="group___g___u_c_s___i_n_i_t___a_n_d___s_r_v_ga64b50780725a0dc8693b5b73f8345ad6.html#ga64b50780725a0dc8693b5b73f8345ad6" title="Assigns default values to a provided UNICENS init structure.">Ucs_SetDefaultConfig</a>(&amp;init_data);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Network Events */</span></div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_aa220785601aa16c0e0aff52f44380719.html#aa220785601aa16c0e0aff52f44380719" title="Network initialization data.">network</a>.<a class="code" href="struct_ucs___network___init_data__t_ae9d2b9f86bdd3a9667a348eb2b75da12.html#ae9d2b9f86bdd3a9667a348eb2b75da12" title="Network Status.">status</a>.<a class="code" href="struct_ucs___network___status__t_ae7a618bc7852c52001d0756913c545c8.html#ae7a618bc7852c52001d0756913c545c8" title="Notification mask (optional parameter; default value: 0xFFFF) Indicates for which parameters the noti...">notification_mask</a> = (<a class="code" href="group___g___u_c_s___n_e_t___t_y_p_e_s_ga779e730fce488874146678e0971f52a8.html#gga779e730fce488874146678e0971f52a8a707f78e3b7a58f4ce21f31da38e00573" title="Flag for notification of availability changes.">UCS_NW_M_AVAIL</a>) | (<a class="code" href="group___g___u_c_s___n_e_t___t_y_p_e_s_ga779e730fce488874146678e0971f52a8.html#gga779e730fce488874146678e0971f52a8a89bb7ec3c55087159a8a19b5e9cc7fa0" title="Flag for notification of node position changes.">UCS_NW_M_NODE_POS</a>);</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_aa220785601aa16c0e0aff52f44380719.html#aa220785601aa16c0e0aff52f44380719" title="Network initialization data.">network</a>.<a class="code" href="struct_ucs___network___init_data__t_ae9d2b9f86bdd3a9667a348eb2b75da12.html#ae9d2b9f86bdd3a9667a348eb2b75da12" title="Network Status.">status</a>.<a class="code" href="struct_ucs___network___status__t_a08f6acd8566e419c7017fc1874720223.html#a08f6acd8566e419c7017fc1874720223" title="Network Status callback function. This function reports information on the whole network.">cb_fptr</a> = &amp;App_OnNetworkStatus;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Network Supervisor */</span></div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a4ff6c5455f2fe95b2d1e4f64665d9a53.html#a4ff6c5455f2fe95b2d1e4f64665d9a53" title="The Supervisor Operation Mode which is active after initialization.">mode</a> = <a class="code" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga3379b65a409a32b3ca0fc680393f8dc7.html#gga3379b65a409a32b3ca0fc680393f8dc7a66541aeea7c4e228bee8f31446a8a104" title="Inactive Mode: The Supervisor will force the network to shutdown and remain in this state...">UCS_SUPV_MODE_INACTIVE</a>;</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_ad2c9193e8ed1fc3b30ad2877e403f413.html#ad2c9193e8ed1fc3b30ad2877e403f413" title="Optional callback function reporting changes of the Supervisor Operation Mode and State...">report_mode_fptr</a> = &amp;App_OnSupvReportMode;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Normal Operation Mode */</span></div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a65914cf67c503dc940f37fd37f87fabb.html#a65914cf67c503dc940f37fd37f87fabb" title="Optional callback function notifying node events.">report_fptr</a> = &amp;App_OnSupvReport;</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_ae261d2df7a2be21b4e8e4a582113643c.html#ae261d2df7a2be21b4e8e4a582113643c" title="Reference to the list of nodes.">nodes_list_ptr</a> = &amp;app_nodes[0];</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_ab0ad9592908a66a29460d67bf3146114.html#ab0ad9592908a66a29460d67bf3146114" title="Number of nodes in the list.">nodes_list_size</a> = APP_NODES_NUM;</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a4bda15e771fef671a47cd88a09707030.html#a4bda15e771fef671a47cd88a09707030" title="Reference to a list of routes.">routes_list_ptr</a> = &amp;app_routes[0];</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a30588f13e23cf04757b91e979e55c369.html#a30588f13e23cf04757b91e979e55c369" title="Number of routes in the list.">routes_list_size</a> = APP_ROUTES_NUM;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Programming Mode */</span></div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a44542f445c849c95f4bd1b510f236cb0.html#a44542f445c849c95f4bd1b510f236cb0" title="Callback function notifying the programming events.">prog_event_fptr</a> = &amp;App_OnSupvProgReport;</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a4e70a4b4f6a0658ebc4c5c7e6872d8d9.html#a4e70a4b4f6a0658ebc4c5c7e6872d8d9" title="Callback function to program the local node.">prog_local_fptr</a> = &amp;App_OnSupvProgLocalDiscover;</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_add64502c7a4e009185f58ad6273ff62a.html#add64502c7a4e009185f58ad6273ff62a" title="Callback function notifying signatures of remote nodes.">prog_signature_fptr</a> = &amp;App_OnSupvProgRemoteDiscover;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* ... further initialization ... */</span></div>
<div class="line"></div>
<div class="line">    <a class="code" href="group___g___u_c_s___i_n_i_t___a_n_d___s_r_v_gaea8d7735d41853167a2befdc06febe43.html#gaea8d7735d41853167a2befdc06febe43" title="UNICENS initialization function.">Ucs_Init</a>(&amp;init_data, &amp;App_OnInitResult);</div>
<div class="line">}</div>
</div><!-- fragment --><h1>Programming the local INIC</h1>
<p>The above assigned callback function <a class="el" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga32ee473b8ec0e01d7a99465e6eb12a09.html#ga32ee473b8ec0e01d7a99465e6eb12a09">supv.prog_local_fptr</a> is the entry point for programming the local INIC. When entering the Supervisor Programming Mode this function is invoked first notifying the signature of the local INIC. The application must decide within this callback function whether to program the local INIC or to skip the local programming and start the remote programming process. For the latter case the application must set none of the function parameters. For programming the local INIC the application must assign the following parameters which are implemented as pointers and hence returning the decision of the application:</p>
<ul>
<li><code>program_pptr</code> <br/>
 This parameter shall be used to specify the programming command which is applied to the local INIC. If this parameter is not written by the application (or set to <code>NULL</code>) the Supervisor starts with the remote programming procedure.</li>
<li><code>result_pfptr</code> <br/>
 This parameter shall be used to assign a callback function which is invoked to notify the result of the local programming procedure.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>If the application does not assign the callback function <code>supv.prog_local_fptr</code> in the initialization structure, the Network Supervisor automatically skips the local programming phase, starts the network and continues with the remote scanning phase.</dd></dl>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> App_ProgTask_</div>
<div class="line">{</div>
<div class="line">    APP_PRGT_NONE        = 0x00U,   <span class="comment">/* nothing to do */</span></div>
<div class="line">    APP_PRGT_CS          = 0x01U,   <span class="comment">/* program configuration string */</span></div>
<div class="line">    APP_PRGT_IS          = 0x02U    <span class="comment">/* program identification string */</span></div>
<div class="line"></div>
<div class="line">} App_ProgTask_t;</div>
<div class="line"></div>
<div class="line"><span class="keyword">extern</span> <span class="keywordtype">void</span> App_OnSupvProgLocalDiscover(<a class="code" href="struct_ucs___signature__t.html" title="This structure holds the signature of the Hello, Welcome and Signature messages. It supports the sign...">Ucs_Signature_t</a> *signature_ptr,</div>
<div class="line">                                        <a class="code" href="struct_ucs___prg___command__t.html" title="Represents a programming task.">Ucs_Prg_Command_t</a> **program_pptr,</div>
<div class="line">                                        <a class="code" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga325bd16a73c18bf2a70dbba45a15b818.html#ga325bd16a73c18bf2a70dbba45a15b818" title="Function signature of result callback used by Programming service.">Ucs_Prg_ReportCb_t</a> *result_pfptr,</div>
<div class="line">                                        <span class="keywordtype">void</span> *user_ptr)</div>
<div class="line">{</div>
<div class="line">    App_ProgTask_t task = APP_PRGT_NONE;</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;App_OnSupvProgLocalDiscover(): position=0x%04X, node=0x%04X, diag_id=0x%04X\n&quot;</span>,</div>
<div class="line">            signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a0057a5f105488012ba3448bbb1099ebe.html#a0057a5f105488012ba3448bbb1099ebe" title="NodePositionAddress.">node_pos_addr</a>, signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a550e0ded0fb13bc58b087d3a162d43c7.html#a550e0ded0fb13bc58b087d3a162d43c7" title="NodeAddress.">node_address</a>, signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_ab98cc6d6cb5cc92d5f6633419daa643e.html#ab98cc6d6cb5cc92d5f6633419daa643e" title="DiagnosisID.">diagnosis_id</a>);</div>
<div class="line"></div>
<div class="line">    task = App_CheckSignature(signature_ptr);   <span class="comment">/* find out what to do...  */</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span> (task)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> APP_PRGT_CS:</div>
<div class="line">        *program_pptr = &amp;app_identstr_cmd;      <span class="comment">/* assign to programming command */</span></div>
<div class="line">        *result_pfptr = &amp;App_OnSupvProgResult;  <span class="comment">/* assign callback function */</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;App_OnSupvProgLocalDiscover(): initiate CS programming\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> APP_PRGT_IS:</div>
<div class="line">        *program_pptr = &amp;app_configstr_cmd;     <span class="comment">/* assign to programming command */</span></div>
<div class="line">        *result_pfptr = &amp;App_OnSupvProgResult;  <span class="comment">/* assign callback function */</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;App_OnSupvProgLocalDiscover(): initiate IS programming\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> APP_PRGT_NONE:</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="comment">/* do not assign programming command and callback function */</span></div>
<div class="line">        <span class="comment">/* -&gt; continue with remote programming */</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;App_OnSupvProgLocalDiscover(): programming not necessary\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1>Programming remote INICs</h1>
<p>If the application decides not to program the local INIC, the Network Supervisor automatically starts the network and continues with the remote programming process. The following issues are important for the remote programming process:</p>
<ul>
<li>The Network Supervisor calls <a class="el" href="struct_ucs___supv___init_data__t.html">supv.prog_signature_fptr</a> to notify discovered remote nodes. There is a cyclic recovery mechanism trigged every 5 seconds. Nodes discovered in a previous cycle may also be discovered in a following cycle. Due to specific network events it may be possible that the notified <a class="el" href="struct_ucs___signature__t.html">node position address</a> within the signature may change. It is important that the application gathers enough information from all remote nodes to have a clear picture of all nodes and their actual position in the network.</li>
<li>If a node needs to be programmed the application shall call <a class="el" href="group___g___u_c_s___s_u_p_v_ga9edc576abeefea451eb58e4d00684615.html#ga9edc576abeefea451eb58e4d00684615" title="Starts the programming sequence for a remote node.">Ucs_Supv_ProgramNode()</a>. The Network Supervisor will leave the remote scanning phase and program the node.</li>
<li>After programming a remote node, the Network Supervisor will notify the programming result to the application. The Network Supervisor then starts a new remote scanning phase announced by <a class="el" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_gaa8c8100f2ddcc385a871ffbe768536ec.html#ggaa8c8100f2ddcc385a871ffbe768536ecaaacb982e9d4171ed948546cb0757566f">UCS_SUPV_PROG_INFO_SCAN_NEW</a>. The application shall discard previously announced signatures and start to gather new information about the discovered remote nodes. When the application has again enough information it may trigger another programming task.</li>
<li>If there is no (more) programming task required the application shall call <a class="el" href="group___g___u_c_s___s_u_p_v_ga0d09f5fda03cb09bae5784194498a58f.html#ga0d09f5fda03cb09bae5784194498a58f" title="Exits the Supervisor Programming Mode.">Ucs_Supv_ProgramExit()</a>. The Network supervisor will automatically shutdown the network and return to the Supervisor Inactive Mode.</li>
<li>If an error occurs while the Supervisor Programming Mode is active, the Network Supervisor will invoke the callback function <a class="el" href="struct_ucs___supv___init_data__t.html">supv.prog_event_fptr</a> notifying an appropriate <a class="el" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_gaa8c8100f2ddcc385a871ffbe768536ec.html#gaa8c8100f2ddcc385a871ffbe768536ec">error code</a>. The Network Supervisor will automatically return to the Supervisor Inactive Mode.</li>
</ul>
<p>The following example code shows a simple example how to discover 2 expected nodes on node position address 0x401 and 0x402 and how it is possible to store the signature for a subsequent programming task. </p>
<dl class="section note"><dt>Note</dt><dd>It is highly recommended to use further criteria besides the node position address to securely identify a node. The EUI48 address, Diagnosis ID or INIC Configuration String version might be helpful to identify remote nodes.</dd></dl>
<div class="fragment"><div class="line"><span class="keyword">extern</span> <span class="keywordtype">void</span> App_OnSupvProgRemoteDiscover(<a class="code" href="struct_ucs___signature__t.html" title="This structure holds the signature of the Hello, Welcome and Signature messages. It supports the sign...">Ucs_Signature_t</a> *signature_ptr, <span class="keywordtype">void</span> *user_ptr)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> ((signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a0057a5f105488012ba3448bbb1099ebe.html#a0057a5f105488012ba3448bbb1099ebe" title="NodePositionAddress.">node_pos_addr</a> == 0x401U) &amp;&amp; ((signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a550e0ded0fb13bc58b087d3a162d43c7.html#a550e0ded0fb13bc58b087d3a162d43c7" title="NodeAddress.">node_address</a> == 0x240U) || (signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a550e0ded0fb13bc58b087d3a162d43c7.html#a550e0ded0fb13bc58b087d3a162d43c7" title="NodeAddress.">node_address</a> == 0xFFFFU)))</div>
<div class="line">    {</div>
<div class="line">        app_401_found = <span class="keyword">true</span>;</div>
<div class="line">        app_401_signature = *signature_ptr;</div>
<div class="line">        printf(<span class="stringliteral">&quot;App_OnSupvProgRemoteDiscover(): recognized position=0x%04X, node=0x%04X, diag=0x%04X\n&quot;</span>, signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a0057a5f105488012ba3448bbb1099ebe.html#a0057a5f105488012ba3448bbb1099ebe" title="NodePositionAddress.">node_pos_addr</a>, signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a550e0ded0fb13bc58b087d3a162d43c7.html#a550e0ded0fb13bc58b087d3a162d43c7" title="NodeAddress.">node_address</a>, signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_ab98cc6d6cb5cc92d5f6633419daa643e.html#ab98cc6d6cb5cc92d5f6633419daa643e" title="DiagnosisID.">diagnosis_id</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a0057a5f105488012ba3448bbb1099ebe.html#a0057a5f105488012ba3448bbb1099ebe" title="NodePositionAddress.">node_pos_addr</a> == 0x402U) &amp;&amp; ((signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a550e0ded0fb13bc58b087d3a162d43c7.html#a550e0ded0fb13bc58b087d3a162d43c7" title="NodeAddress.">node_address</a> == 0x241U) || (signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a550e0ded0fb13bc58b087d3a162d43c7.html#a550e0ded0fb13bc58b087d3a162d43c7" title="NodeAddress.">node_address</a> == 0xFFFFU)) )</div>
<div class="line">    {</div>
<div class="line">        app_402_found = <span class="keyword">true</span>;</div>
<div class="line">        app_402_signature = *signature_ptr;</div>
<div class="line">        printf(<span class="stringliteral">&quot;App_OnSupvProgRemoteDiscover(): recognized position=0x%04X, node=0x%04X, diag=0x%04X\n&quot;</span>, signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a0057a5f105488012ba3448bbb1099ebe.html#a0057a5f105488012ba3448bbb1099ebe" title="NodePositionAddress.">node_pos_addr</a>, signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a550e0ded0fb13bc58b087d3a162d43c7.html#a550e0ded0fb13bc58b087d3a162d43c7" title="NodeAddress.">node_address</a>, signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_ab98cc6d6cb5cc92d5f6633419daa643e.html#ab98cc6d6cb5cc92d5f6633419daa643e" title="DiagnosisID.">diagnosis_id</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        (void)printf(<span class="stringliteral">&quot;App_OnSupvProgRemoteDiscover(): found unknown position=0x%04X, node=0x%04X, diag=0x%04X\n&quot;</span>, signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a0057a5f105488012ba3448bbb1099ebe.html#a0057a5f105488012ba3448bbb1099ebe" title="NodePositionAddress.">node_pos_addr</a>, signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a550e0ded0fb13bc58b087d3a162d43c7.html#a550e0ded0fb13bc58b087d3a162d43c7" title="NodeAddress.">node_address</a>, signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_ab98cc6d6cb5cc92d5f6633419daa643e.html#ab98cc6d6cb5cc92d5f6633419daa643e" title="DiagnosisID.">diagnosis_id</a>);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">&copy; 2019 Microchip Technology Inc. All rights reserved. <a href="http://www.microchip.com" target="_blank">www.microchip.com</a></li>
  </ul>
</div>
</body>
<!--
Generated on Wed Jun 19 2019 16:18:16 for UNICENS by
Doxygen 1.8.2
-->
<script language="javascript">
<!--
$('#MSearchResults').wrap('<div style="position: absolute; margin-left: 444px;"></div>');
-->
</script>
</html>
