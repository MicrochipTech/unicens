<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>UNICENS: Static Connections</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="style_html.css" rel="stylesheet" type="text/css" />
<link href="INICInterfaceSpecification.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="GlobalWrapper">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td><a href="index.html"><img alt="Logo" src="logo.png"/></a></td>
  <td>
   <div id="projectname">UNICENS&#160;<span id="projectnumber">V2.3.0-4567</span></div>
   <div id="projectbrief">User Manual and API Reference</div>
    <div id="searchbox">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_p__u_m__s_t_a_r_t_e_d__s_c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Static Connections </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Introduction</h1>
<p>Static Connections have been implemented to enable features like <b>Early Audio, eCall and Fallback</b> scenarios. Like it can be seen in the picture below, static connections can only use the proxy channel for data transmission and therefore define there transmission data with a static connection label. The following page describes how static connections can be used and how the system has to be set up for it. </p>
<div class="image">
<img src="StaticConnection.jpg" alt="StaticConnection.jpg"/>
</div>
<h1>Basics</h1>
<h2>Default Created Endpoint </h2>
<p>Default Created Endpoints are defined in the INICs config string. The build of these endpoints is triggered when the predefined network status occurs (e.g network startup, network fallback). Since they are built without usage of the XRM module they do not require a XRM job list. How ever the connection label specified in the config string has to be set as additional parameter in the route structure, if the route is built between a default created endpoint and a conventional one. How the endpoint description looks like can be seen in the example below.</p>
<h2>Proxy Channel </h2>
<p>The Proxy Channel is a reserved area in the network bandwidth and can be used for streaming transmission. To allocate this area for proxy channel usage, the corresponding bandwidth has to be set in the UNICENS initialization structure. The reservation is executed by the INIC (TimingMaster) on network startup. Within this reserved area, connection labels can be mapped to individual frame bytes.</p>
<p>The correct frame byte mapping is in the responsibility of the system integrator and must be done according to the following rules: </p>
<ul>
<li>
The frame bytes must be consecutive - a gap in-between the frame bytes is not allowed </li>
<li>
The connection label value denotes the highest index of the frame bytes used </li>
</ul>
<h2>Static Connection Labels </h2>
<p>Static Connection Labels are used for static routes and defined to use the proxy channel for data transfer. Note that the highest bit of the connection label defines it as static. By that, valid labels reach from 0x800C to 0x817F for a 150 Mbit system and from 0x800C to 0x807F for 50Mbit systems. Allocated bandwidth in the proxy channel must be consecutive and the connection label value denotes the <b> highest index </b> of the frame bytes used. Since that, the address of the connection label has to be chosen high enough in order the following bytes also fit in the allocated channel area.</p>
<div class="image">
<img src="ProxyChannel.jpg" alt="ProxyChannel.jpg"/>
</div>
<h1>Use Cases and Implementation</h1>
<h2>Static Connections in Normal Operation Mode </h2>
<p>The first step to get use of the proxy channel is to set the reserved proxy channel bandwidth. This is done in the initialization structure: </p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/*... */</span></div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a74e977f673a919f991f22a62ec2f040e.html#a74e977f673a919f991f22a62ec2f040e" title="The desired proxy channel bandwidth.">proxy_channel_bw</a> = 30U; <span class="comment">/* Reserved proxy channel bandwidth */</span></div>
<div class="line">    <span class="comment">/*... */</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>The next step is to define the routes setup. To use the before reserved bandwidth the corresponding connection label has to be set in the route structure. Also note if a default created endpoint is used no job list is required and the endpoint type has to be set to an default created type.</p>
<div class="fragment"><div class="line"><a class="code" href="struct_ucs___rm___end_point__t.html" title="Configuration structure of a Connection EndPoint.">Ucs_Rm_EndPoint_t</a> SinkEndpointForRoute = {</div>
<div class="line">    <a class="code" href="group___g___u_c_s___r_o_u_t_i_n_g___t_y_p_e_s_ga127a72f023d3c0289ab74b001f6edc25.html#gga127a72f023d3c0289ab74b001f6edc25a63c4dfa3683ce8122d760c4e2d580138" title="Specifies the sink endpoint.">UCS_RM_EP_SINK</a>,         <span class="comment">/* Normal endpoint */</span></div>
<div class="line">    SnkOfRoute_JobList,     <span class="comment">/* Job list required */</span></div>
<div class="line">    &amp;Nodes[0],</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><a class="code" href="struct_ucs___rm___end_point__t.html" title="Configuration structure of a Connection EndPoint.">Ucs_Rm_EndPoint_t</a> SourceEndpointForRoute = {</div>
<div class="line">    <a class="code" href="group___g___u_c_s___r_o_u_t_i_n_g___t_y_p_e_s_ga127a72f023d3c0289ab74b001f6edc25.html#gga127a72f023d3c0289ab74b001f6edc25a5e01bf5f88a0e612cc1e7c1cb25df8a0" title="Specifies a default created source endpoint.">UCS_RM_EP_DC_SOURCE</a>,    <span class="comment">/* Default created endpoint */</span></div>
<div class="line">    NULL,                   <span class="comment">/* No job list required */</span></div>
<div class="line">    &amp;Nodes[1],</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><a class="code" href="struct_ucs___rm___route__t.html" title="Configuration structure of a Route.">Ucs_Rm_Route_t</a> Route = {</div>
<div class="line">    &amp;SourceEndpointForRoute,</div>
<div class="line">    &amp;SinkEndpointForRoute,</div>
<div class="line">    1,          <span class="comment">/* Route active */</span></div>
<div class="line">    0x0066,</div>
<div class="line">    {0},        <span class="comment">/* ATD disabled */</span></div>
<div class="line">    {0x8013, 0} <span class="comment">/* Static Connection Label set */</span></div>
<div class="line">};</div>
</div><!-- fragment --><h2>Static Connections in Fallback Mode </h2>
<p>Fallback mode does not support the use of normal connections however the use of static connections. The proxy channel bandwidth is automatically set to the highest possible value when Fallback mode is entered and no allocation has to be done manually at the initialization. Since communication is limited in Fallback mode the XRM module is not able to trigger the build of resources in remote nodes. Therefore all remote endpoints have to be from type default created and have the Auto-Build Trigger set to NetworkFallback. Additional the Fallback enable flag has to be set in the route structure, which will trigger the build of local resources <b> only </b> when the network is in Fallback mode.</p>
<div class="image">
<img src="BuildConfig_Fallback.JPG" alt="BuildConfig_Fallback.JPG"/>
</div>
<div class="fragment"><div class="line"><a class="code" href="struct_ucs___rm___end_point__t.html" title="Configuration structure of a Connection EndPoint.">Ucs_Rm_EndPoint_t</a> SinkEndpointForRoute = {</div>
<div class="line">    <a class="code" href="group___g___u_c_s___r_o_u_t_i_n_g___t_y_p_e_s_ga127a72f023d3c0289ab74b001f6edc25.html#gga127a72f023d3c0289ab74b001f6edc25a63c4dfa3683ce8122d760c4e2d580138" title="Specifies the sink endpoint.">UCS_RM_EP_SINK</a>,         <span class="comment">/* Normal endpoint */</span></div>
<div class="line">    SnkOfRoute_JobList,     <span class="comment">/* Job list required */</span></div>
<div class="line">    &amp;Nodes[0],</div>
<div class="line">}; </div>
<div class="line"></div>
<div class="line"><a class="code" href="struct_ucs___rm___end_point__t.html" title="Configuration structure of a Connection EndPoint.">Ucs_Rm_EndPoint_t</a> SourceEndpointForRoute = {</div>
<div class="line">    <a class="code" href="group___g___u_c_s___r_o_u_t_i_n_g___t_y_p_e_s_ga127a72f023d3c0289ab74b001f6edc25.html#gga127a72f023d3c0289ab74b001f6edc25a5e01bf5f88a0e612cc1e7c1cb25df8a0" title="Specifies a default created source endpoint.">UCS_RM_EP_DC_SOURCE</a>,    <span class="comment">/* Default created endpoint */</span></div>
<div class="line">    NULL,                   <span class="comment">/* No job list required */</span></div>
<div class="line">    &amp;Nodes[1],</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><a class="code" href="struct_ucs___rm___route__t.html" title="Configuration structure of a Route.">Ucs_Rm_Route_t</a> Route = {</div>
<div class="line">    &amp;SourceEndpointForRoute,</div>
<div class="line">    &amp;SinkEndpointForRoute,</div>
<div class="line">    1,          <span class="comment">/* Route active */</span></div>
<div class="line">    0x0066,</div>
<div class="line">    {0},        <span class="comment">/* ATD disabled */</span></div>
<div class="line">    {0x8013, 1} <span class="comment">/* Fallback enabled, static Connection Label set */</span></div>
<div class="line">};</div>
</div><!-- fragment --><h1>Limitations</h1>
<p>There are some restrictions of using default created routes: </p>
<ul>
<li>
If the route only consists of default created endpoints, neither endpoint nor route structure has to be created in the setup. </li>
<li>
If the route consists of one default created endpoint and one created by the resource manager, the route description has to be placed in the setup and the one endpoint signed as default created. </li>
<li>
The routing management gets no feedback if an default created endpoint was built. The locally built endpoint will just read or write to the corresponding connection label. It's up to the network integrator to set up the default created endpoints correctly. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">&copy; 2019 Microchip Technology Inc. All rights reserved. <a href="http://www.microchip.com" target="_blank">www.microchip.com</a></li>
  </ul>
</div>
</body>
<!--
Generated on Wed Jun 19 2019 16:18:16 for UNICENS by
Doxygen 1.8.2
-->
<script language="javascript">
<!--
$('#MSearchResults').wrap('<div style="position: absolute; margin-left: 444px;"></div>');
-->
</script>
</html>
