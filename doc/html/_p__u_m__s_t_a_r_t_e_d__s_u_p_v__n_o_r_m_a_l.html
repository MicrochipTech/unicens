<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>UNICENS: Supervisor Normal Operation Mode</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="style_html.css" rel="stylesheet" type="text/css" />
<link href="INICInterfaceSpecification.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="GlobalWrapper">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td><a href="index.html"><img alt="Logo" src="logo.png"/></a></td>
  <td>
   <div id="projectname">UNICENS&#160;<span id="projectnumber">V2.3.0-4567</span></div>
   <div id="projectbrief">User Manual and API Reference</div>
    <div id="searchbox">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_p__u_m__s_t_a_r_t_e_d__s_u_p_v__n_o_r_m_a_l.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Supervisor Normal Operation Mode </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Introduction</h1>
<p>The Supervisor Normal Operation Mode is the usual mode an application wants to run the network in, within a production system. The target is to run the network in an "Available.Regular" state and to have all network nodes initialized and all activated routes built.</p>
<p>Therefore the Supervisor Normal Operation Mode must perform the following tasks:</p>
<ul>
<li>Force the network into "Available.Regular" state, and re-establish this state if necessary.</li>
<li>Initialize all network nodes:<ul>
<li>Run the NodeDiscovery process and welcome all nodes which are registered within the <b>Network Descriptor</b>. Thereby, a network node will adopt the 16-bit node address which is present in its signature.</li>
<li>Run the initialization script which is registered for the particular node.</li>
<li>Activate the Routing Management for the particular node. If both nodes of a route are initialized and the route is set to active, it will be built by the Routing Management.</li>
</ul>
</li>
<li>Observe and handle the network availability and resets of remote nodes.</li>
</ul>
<h1>The Network Descriptor</h1>
<p>The Network Descriptor is a listing of all known nodes and routes that are expected in the specified network. A node or route which is not listed withing the Network Descriptor is not applicable. I.e., if an application requires to handle multiple network setups in a production system, it will need either to define multiple Network Descriptors (on for each target system) or a single Network Descriptor comprising a superset of all nodes and routes.</p>
<p>The Network Descriptor contains the following information:</p>
<ul>
<li>A list of all nodes:<ul>
<li>A node is identified by the node_address field which is specified in the related signature. (The other fields of the signature are currently not used by the Network Supervisor to identify the node.)</li>
<li>The specified node_address must be unique within the list of all nodes.</li>
<li>It is possible to specify an initialization script which is automatically executed by the Network Supervisor when the node is discovered and initialized. The commands are restricted to GPIO and I2C functions.</li>
</ul>
</li>
<li>A list of all routes:<ul>
<li>A route consists of one source and one sink endpoint.</li>
<li>Each endpoint refers to one node structure (which must be part of the nodes list) and to a <code>NULL</code>-terminated job list.</li>
<li>The job list is a specification of resource objects that must be created to build the endpoint.</li>
<li>It is possible to specify the route as <code>active</code>. This means as soon as the source and sink nodes are initialized the route will be built automatically. If the application uses a dynamic approach for the Routing Management it is possible to call <a class="el" href="group___g___u_c_s___r_o_u_t_i_n_g_gabb9185254132bb29ee0af137c36f50b8.html#gabb9185254132bb29ee0af137c36f50b8" title="Sets the given route to active respectively inactive and triggers the routing process to handle the r...">Ucs_Rm_SetRouteActive()</a> to change the <code>active</code> attribute during runtime.</li>
</ul>
</li>
</ul>
<p>The following example code specified two nodes and one route. The route is specified as active so that the route is build as soon as both nodes are discovered and initialized. The local INIC (root node) is expected to be configured with <code>node_address</code> <code>0x200</code>.</p>
<div class="fragment"><div class="line"><span class="comment">/*------------------------------------------------------------------------------------------------*/</span></div>
<div class="line"><span class="comment">/* Nodes                                                                                          */</span></div>
<div class="line"><span class="comment">/*------------------------------------------------------------------------------------------------*/</span></div>
<div class="line"><span class="preprocessor">#define APP_NODES_NUM 2U</span></div>
<div class="line"><span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="struct_ucs___signature__t.html" title="This structure holds the signature of the Hello, Welcome and Signature messages. It supports the sign...">Ucs_Signature_t</a> signature200  = {0x200U <span class="comment">/*node_address*/</span>};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_ucs___signature__t.html" title="This structure holds the signature of the Hello, Welcome and Signature messages. It supports the sign...">Ucs_Signature_t</a> signature205 = {0x205U <span class="comment">/*node_address*/</span>};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_ucs___rm___node__t.html" title="Configuration structure of a Node.">Ucs_Rm_Node_t</a> app_nodes[APP_NODES_NUM] = {{&amp;signature200, NULL, 0U}, <span class="comment">/* root node */</span></div>
<div class="line">                                                 {&amp;signature205, NULL, 0U}};<span class="comment">/* remote node */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*------------------------------------------------------------------------------------------------*/</span></div>
<div class="line"><span class="comment">/* Routes                                                                                         */</span></div>
<div class="line"><span class="comment">/*------------------------------------------------------------------------------------------------*/</span></div>
<div class="line"><span class="comment">/* Specification of XRM JOB OUT */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_ucs___xrm___network_socket__t.html" title="Configuration structure of a network socket.">Ucs_Xrm_NetworkSocket_t</a>        Xrm_Nw_Sckt_Out = {<a class="code" href="group___g___u_c_s___x_r_m___t_y_p_e_s_gac238d98be8f9df6340eb4ee72de36ccc.html#ggac238d98be8f9df6340eb4ee72de36ccca3ef70ccdea3e80ce549be70baf9c16a7" title="network socket">UCS_XRM_RC_TYPE_NW_SOCKET</a>,</div>
<div class="line">                                                         0x0D00U,</div>
<div class="line">                                                         <a class="code" href="group___g___u_c_s___x_r_m___e_n_u_m_ga28477f727fe10f9d6fd21cfc98a9c115.html#gga28477f727fe10f9d6fd21cfc98a9c115aa14fc95a1f8c5f54aa6d601614a887fe" title="Socket transfers data out of INIC.">UCS_SOCKET_DIR_OUTPUT</a>,</div>
<div class="line">                                                         <a class="code" href="group___g___u_c_s___x_r_m___e_n_u_m_ga08137994e7d855f0e2f959ec96bd9f89.html#gga08137994e7d855f0e2f959ec96bd9f89aa761241fb9a680fcc2f0378e1b1318dc" title="Specifies the synchronous streaming data type.">UCS_NW_SCKT_SYNC_DATA</a>,</div>
<div class="line">                                                         2U};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_ucs___xrm___default_created_port__t.html" title="Configuration structure of a default created port. This structure is used for ports that are configur...">Ucs_Xrm_DefaultCreatedPort_t</a>    Xrm_Usb_Port_1 = {<a class="code" href="group___g___u_c_s___x_r_m___t_y_p_e_s_gac238d98be8f9df6340eb4ee72de36ccc.html#ggac238d98be8f9df6340eb4ee72de36cccacf416b59b369504088ef6810b4c545e1" title="Default created port.">UCS_XRM_RC_TYPE_DC_PORT</a>, </div>
<div class="line">                                                         <a class="code" href="group___g___u_c_s___x_r_m___t_y_p_e_s_ga50384bb32b088e9cfd50c889ef562015.html#gga50384bb32b088e9cfd50c889ef562015a7b31f75e1806723739f4d7fd2bc483d3" title="USB Port.">UCS_XRM_PORT_TYPE_USB</a>,</div>
<div class="line">                                                         0U};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_ucs___xrm___usb_socket__t.html" title="Configuration structure of a USB socket.">Ucs_Xrm_UsbSocket_t</a>          Xrm_Usb_Socket_In = {<a class="code" href="group___g___u_c_s___x_r_m___t_y_p_e_s_gac238d98be8f9df6340eb4ee72de36ccc.html#ggac238d98be8f9df6340eb4ee72de36ccca5e2f20f818f67af2502a600f06b9ab11" title="USB socket.">UCS_XRM_RC_TYPE_USB_SOCKET</a>,</div>
<div class="line">                                                         &amp;Xrm_Usb_Port_1,</div>
<div class="line">                                                         <a class="code" href="group___g___u_c_s___x_r_m___e_n_u_m_ga28477f727fe10f9d6fd21cfc98a9c115.html#gga28477f727fe10f9d6fd21cfc98a9c115a02fdd605a809a4a660e25cfd888347c7" title="Socket transfers data into INIC.">UCS_SOCKET_DIR_INPUT</a>,</div>
<div class="line">                                                         <a class="code" href="group___g___u_c_s___x_r_m___e_n_u_m_gafd56377a5a1f782e64260d18caf17dc9.html#ggafd56377a5a1f782e64260d18caf17dc9a4df4e4d4848358e18a3ef6386db80acf" title="Specifies the synchronous streaming data type.">UCS_USB_SCKT_SYNC_DATA</a>,</div>
<div class="line">                                                         0x01U<span class="comment">/*endpoint*/</span>,</div>
<div class="line">                                                         0x0007U <span class="comment">/*frames*/</span>};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_ucs___xrm___sync_con__t.html" title="Configuration structure of a synchronous data connection.">Ucs_Xrm_SyncCon_t</a>            Xrm_Sync_Conn_Src = {<a class="code" href="group___g___u_c_s___x_r_m___t_y_p_e_s_gac238d98be8f9df6340eb4ee72de36ccc.html#ggac238d98be8f9df6340eb4ee72de36ccca47342ee294555a9b7e738c9fc34b5265" title="Synchronous data connection.">UCS_XRM_RC_TYPE_SYNC_CON</a>,</div>
<div class="line">                                                         &amp;Xrm_Usb_Socket_In,</div>
<div class="line">                                                         &amp;Xrm_Nw_Sckt_Out,</div>
<div class="line">                                                         <a class="code" href="group___g___u_c_s___x_r_m___e_n_u_m_gaef12892b897a1cd1013357cfe63f2434.html#ggaef12892b897a1cd1013357cfe63f2434a6e21656de3fa891d522f272307fca772" title="No mute monitoring.">UCS_SYNC_MUTE_MODE_NO_MUTING</a>,</div>
<div class="line">                                                         0U};</div>
<div class="line"></div>
<div class="line"><span class="comment">/* Specification of XRM JOB IN */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_ucs___xrm___network_socket__t.html" title="Configuration structure of a network socket.">Ucs_Xrm_NetworkSocket_t</a>         Xrm_Nw_Sckt_In = {<a class="code" href="group___g___u_c_s___x_r_m___t_y_p_e_s_gac238d98be8f9df6340eb4ee72de36ccc.html#ggac238d98be8f9df6340eb4ee72de36ccca3ef70ccdea3e80ce549be70baf9c16a7" title="network socket">UCS_XRM_RC_TYPE_NW_SOCKET</a>,</div>
<div class="line">                                                         0x0D00U,</div>
<div class="line">                                                         <a class="code" href="group___g___u_c_s___x_r_m___e_n_u_m_ga28477f727fe10f9d6fd21cfc98a9c115.html#gga28477f727fe10f9d6fd21cfc98a9c115a02fdd605a809a4a660e25cfd888347c7" title="Socket transfers data into INIC.">UCS_SOCKET_DIR_INPUT</a>,</div>
<div class="line">                                                         <a class="code" href="group___g___u_c_s___x_r_m___e_n_u_m_ga08137994e7d855f0e2f959ec96bd9f89.html#gga08137994e7d855f0e2f959ec96bd9f89aa761241fb9a680fcc2f0378e1b1318dc" title="Specifies the synchronous streaming data type.">UCS_NW_SCKT_SYNC_DATA</a>,</div>
<div class="line">                                                         2U};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_ucs___xrm___default_created_port__t.html" title="Configuration structure of a default created port. This structure is used for ports that are configur...">Ucs_Xrm_DefaultCreatedPort_t</a>    Xrm_Usb_Port_2 = {<a class="code" href="group___g___u_c_s___x_r_m___t_y_p_e_s_gac238d98be8f9df6340eb4ee72de36ccc.html#ggac238d98be8f9df6340eb4ee72de36cccacf416b59b369504088ef6810b4c545e1" title="Default created port.">UCS_XRM_RC_TYPE_DC_PORT</a>,</div>
<div class="line">                                                         <a class="code" href="group___g___u_c_s___x_r_m___t_y_p_e_s_ga50384bb32b088e9cfd50c889ef562015.html#gga50384bb32b088e9cfd50c889ef562015a7b31f75e1806723739f4d7fd2bc483d3" title="USB Port.">UCS_XRM_PORT_TYPE_USB</a>, 0U};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_ucs___xrm___usb_socket__t.html" title="Configuration structure of a USB socket.">Ucs_Xrm_UsbSocket_t</a>         Xrm_Usb_Socket_Out = {<a class="code" href="group___g___u_c_s___x_r_m___t_y_p_e_s_gac238d98be8f9df6340eb4ee72de36ccc.html#ggac238d98be8f9df6340eb4ee72de36ccca5e2f20f818f67af2502a600f06b9ab11" title="USB socket.">UCS_XRM_RC_TYPE_USB_SOCKET</a>,</div>
<div class="line">                                                         &amp;Xrm_Usb_Port_2,</div>
<div class="line">                                                         <a class="code" href="group___g___u_c_s___x_r_m___e_n_u_m_ga28477f727fe10f9d6fd21cfc98a9c115.html#gga28477f727fe10f9d6fd21cfc98a9c115aa14fc95a1f8c5f54aa6d601614a887fe" title="Socket transfers data out of INIC.">UCS_SOCKET_DIR_OUTPUT</a>,</div>
<div class="line">                                                         <a class="code" href="group___g___u_c_s___x_r_m___e_n_u_m_gafd56377a5a1f782e64260d18caf17dc9.html#ggafd56377a5a1f782e64260d18caf17dc9a4df4e4d4848358e18a3ef6386db80acf" title="Specifies the synchronous streaming data type.">UCS_USB_SCKT_SYNC_DATA</a>,</div>
<div class="line">                                                         0x81U<span class="comment">/*endpoint*/</span>,</div>
<div class="line">                                                         0x0007U<span class="comment">/*frames*/</span>};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_ucs___xrm___sync_con__t.html" title="Configuration structure of a synchronous data connection.">Ucs_Xrm_SyncCon_t</a>           Xrm_Sync_Conn_Sink = {<a class="code" href="group___g___u_c_s___x_r_m___t_y_p_e_s_gac238d98be8f9df6340eb4ee72de36ccc.html#ggac238d98be8f9df6340eb4ee72de36ccca47342ee294555a9b7e738c9fc34b5265" title="Synchronous data connection.">UCS_XRM_RC_TYPE_SYNC_CON</a>,</div>
<div class="line">                                                         &amp;Xrm_Nw_Sckt_In,</div>
<div class="line">                                                         &amp;Xrm_Usb_Socket_Out,</div>
<div class="line">                                                         <a class="code" href="group___g___u_c_s___x_r_m___e_n_u_m_gaef12892b897a1cd1013357cfe63f2434.html#ggaef12892b897a1cd1013357cfe63f2434a6e21656de3fa891d522f272307fca772" title="No mute monitoring.">UCS_SYNC_MUTE_MODE_NO_MUTING</a>,</div>
<div class="line">                                                         0U};</div>
<div class="line"></div>
<div class="line"><span class="comment">/* Specification of the XRM jobs lists */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group___g___u_c_s___x_r_m___t_y_p_e_s_ga74e06fedcde6bc971088b2cb21405173.html#ga74e06fedcde6bc971088b2cb21405173" title="INIC Resource Object used for Extended Resource Manager jobs.">Ucs_Xrm_ResObject_t</a> * xrm_job_out[] = {&amp;Xrm_Nw_Sckt_Out, &amp;Xrm_Usb_Port_1, &amp;Xrm_Usb_Socket_In,</div>
<div class="line">                                              &amp;Xrm_Sync_Conn_Src, NULL};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group___g___u_c_s___x_r_m___t_y_p_e_s_ga74e06fedcde6bc971088b2cb21405173.html#ga74e06fedcde6bc971088b2cb21405173" title="INIC Resource Object used for Extended Resource Manager jobs.">Ucs_Xrm_ResObject_t</a> * xrm_job_in[]  = {&amp;Xrm_Nw_Sckt_In,  &amp;Xrm_Usb_Port_2, &amp;Xrm_Usb_Socket_Out,</div>
<div class="line">                                              &amp;Xrm_Sync_Conn_Sink, NULL};</div>
<div class="line"></div>
<div class="line"><span class="comment">/* Source and Sink Endpoints */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_ucs___rm___end_point__t.html" title="Configuration structure of a Connection EndPoint.">Ucs_Rm_EndPoint_t</a> endpoint_src      = {<a class="code" href="group___g___u_c_s___r_o_u_t_i_n_g___t_y_p_e_s_ga127a72f023d3c0289ab74b001f6edc25.html#gga127a72f023d3c0289ab74b001f6edc25ac1244d5bc6a569137f6f9132b8b0a3da" title="Specifies the source endpoint.">UCS_RM_EP_SOURCE</a>, &amp;xrm_job_out[0], &amp;app_nodes[0]};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_ucs___rm___end_point__t.html" title="Configuration structure of a Connection EndPoint.">Ucs_Rm_EndPoint_t</a> endpoint_sink     = {<a class="code" href="group___g___u_c_s___r_o_u_t_i_n_g___t_y_p_e_s_ga127a72f023d3c0289ab74b001f6edc25.html#gga127a72f023d3c0289ab74b001f6edc25a63c4dfa3683ce8122d760c4e2d580138" title="Specifies the sink endpoint.">UCS_RM_EP_SINK</a>,   &amp;xrm_job_in[0],  &amp;app_nodes[1]};</div>
<div class="line"></div>
<div class="line"><span class="comment">/* Routes Specification */</span></div>
<div class="line"><span class="preprocessor">#define APP_ROUTES_NUM          1U</span></div>
<div class="line"><span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="struct_ucs___rm___route__t.html" title="Configuration structure of a Route.">Ucs_Rm_Route_t</a> app_routes[APP_ROUTES_NUM] = { {  &amp;endpoint_src,</div>
<div class="line">                                                        &amp;endpoint_sink, </div>
<div class="line">                                                        <span class="keyword">true</span> <span class="comment">/*is_active*/</span>,</div>
<div class="line">                                                        66U  <span class="comment">/* route_id */</span>}</div>
<div class="line">                                                   };</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>It is important that each node in the "list of nodes" has a valid pointer to a node signature. Within the node signature the <code>node_address</code> attribute must be set to the value as set in the "identification string" of the respective node (INIC). Each node must be configured with a unique <code>node_address</code>. Other values inside the identification string are not evaluated by the Network Supervisor.</dd></dl>
<h1>Initialization</h1>
<h2>Example</h2>
<p>The Supervisor Normal Operation Mode provides several attributes to specify the target network state. Besides the list of nodes and routes the application can specify the target packet bandwidth and also proxy channel bandwidth. The proxy channel bandwidth is required if you specify static connections which are automatically created by the INIC if the network reaches the "Available.Regular" state.</p>
<p>The following example shows a typical initialization as it is required to run the Supervisor Normal Operation Mode with the Network Descriptor shown above.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> App_Initialize(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="struct_ucs___init_data__t.html" title="UNICENS initialization structure used by function Ucs_Init().">Ucs_InitData_t</a> init_data;</div>
<div class="line">    <a class="code" href="group___g___u_c_s___i_n_i_t___a_n_d___s_r_v_ga64b50780725a0dc8693b5b73f8345ad6.html#ga64b50780725a0dc8693b5b73f8345ad6" title="Assigns default values to a provided UNICENS init structure.">Ucs_SetDefaultConfig</a>(&amp;init_data);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Network Events */</span></div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_aa220785601aa16c0e0aff52f44380719.html#aa220785601aa16c0e0aff52f44380719" title="Network initialization data.">network</a>.<a class="code" href="struct_ucs___network___init_data__t_ae9d2b9f86bdd3a9667a348eb2b75da12.html#ae9d2b9f86bdd3a9667a348eb2b75da12" title="Network Status.">status</a>.<a class="code" href="struct_ucs___network___status__t_ae7a618bc7852c52001d0756913c545c8.html#ae7a618bc7852c52001d0756913c545c8" title="Notification mask (optional parameter; default value: 0xFFFF) Indicates for which parameters the noti...">notification_mask</a> = (<a class="code" href="group___g___u_c_s___n_e_t___t_y_p_e_s_ga779e730fce488874146678e0971f52a8.html#gga779e730fce488874146678e0971f52a8a707f78e3b7a58f4ce21f31da38e00573" title="Flag for notification of availability changes.">UCS_NW_M_AVAIL</a>) | (<a class="code" href="group___g___u_c_s___n_e_t___t_y_p_e_s_ga779e730fce488874146678e0971f52a8.html#gga779e730fce488874146678e0971f52a8a89bb7ec3c55087159a8a19b5e9cc7fa0" title="Flag for notification of node position changes.">UCS_NW_M_NODE_POS</a>);</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_aa220785601aa16c0e0aff52f44380719.html#aa220785601aa16c0e0aff52f44380719" title="Network initialization data.">network</a>.<a class="code" href="struct_ucs___network___init_data__t_ae9d2b9f86bdd3a9667a348eb2b75da12.html#ae9d2b9f86bdd3a9667a348eb2b75da12" title="Network Status.">status</a>.<a class="code" href="struct_ucs___network___status__t_a08f6acd8566e419c7017fc1874720223.html#a08f6acd8566e419c7017fc1874720223" title="Network Status callback function. This function reports information on the whole network.">cb_fptr</a> = &amp;App_OnNetworkStatus;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Routing Events */</span></div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a8619aaf795810b7508046fbfef6d6907.html#a8619aaf795810b7508046fbfef6d6907" title="The initialization data of the Routing Management.">rm</a>.<a class="code" href="struct_ucs___rm___init_data__t_a2420c468d89e6f991f68189ba2f61d15.html#a2420c468d89e6f991f68189ba2f61d15" title="Optional report callback function pointer for all routes.">report_fptr</a> = &amp;App_OnRoutingResult;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* GPIO */</span></div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_aaff1fbd74feb484366c4082f00f2aea7.html#aaff1fbd74feb484366c4082f00f2aea7" title="Initialization structure of the GPIO.">gpio</a>.<a class="code" href="struct_ucs___gpio___init_data__t_abb586c1dd43ecda56d21209333104904.html#abb586c1dd43ecda56d21209333104904" title="Callback function that reports trigger events information of the GPIO Port.">trigger_event_status_fptr</a> = &amp;App_OnGpioTriggerEventCb;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Network Supervisor */</span></div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a4ff6c5455f2fe95b2d1e4f64665d9a53.html#a4ff6c5455f2fe95b2d1e4f64665d9a53" title="The Supervisor Operation Mode which is active after initialization.">mode</a> = <a class="code" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga3379b65a409a32b3ca0fc680393f8dc7.html#gga3379b65a409a32b3ca0fc680393f8dc7a87b3d599aabfd1344b97f83ea0e84ac0" title="Normal Operation Mode: The Supervisor will startup the network, configure nodes and execute routing m...">UCS_SUPV_MODE_NORMAL</a>;</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_ad2c9193e8ed1fc3b30ad2877e403f413.html#ad2c9193e8ed1fc3b30ad2877e403f413" title="Optional callback function reporting changes of the Supervisor Operation Mode and State...">report_mode_fptr</a> = &amp;App_OnSupvReportMode;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Normal Operation Mode */</span></div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a65914cf67c503dc940f37fd37f87fabb.html#a65914cf67c503dc940f37fd37f87fabb" title="Optional callback function notifying node events.">report_fptr</a> = &amp;App_OnSupvReport;</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a980d5ec2fe728b8ca99de235be7858d2.html#a980d5ec2fe728b8ca99de235be7858d2" title="The desired packet bandwidth. The valid value range is Chip specific.">packet_bw</a> = 52U;</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a74e977f673a919f991f22a62ec2f040e.html#a74e977f673a919f991f22a62ec2f040e" title="The desired proxy channel bandwidth.">proxy_channel_bw</a> = 0U;</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_ae261d2df7a2be21b4e8e4a582113643c.html#ae261d2df7a2be21b4e8e4a582113643c" title="Reference to the list of nodes.">nodes_list_ptr</a> = &amp;app_nodes[0];</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_ab0ad9592908a66a29460d67bf3146114.html#ab0ad9592908a66a29460d67bf3146114" title="Number of nodes in the list.">nodes_list_size</a> = APP_NODES_NUM;</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a4bda15e771fef671a47cd88a09707030.html#a4bda15e771fef671a47cd88a09707030" title="Reference to a list of routes.">routes_list_ptr</a> = &amp;app_routes[0];</div>
<div class="line">    init_data.<a class="code" href="struct_ucs___init_data__t_a5745357c34d0d5332f027f179d85ec7f.html#a5745357c34d0d5332f027f179d85ec7f" title="The initialization data of the Network Supervisor.">supv</a>.<a class="code" href="struct_ucs___supv___init_data__t_a30588f13e23cf04757b91e979e55c369.html#a30588f13e23cf04757b91e979e55c369" title="Number of routes in the list.">routes_list_size</a> = APP_ROUTES_NUM;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* ... further initialization ... */</span></div>
<div class="line"></div>
<div class="line">    <a class="code" href="group___g___u_c_s___i_n_i_t___a_n_d___s_r_v_gaea8d7735d41853167a2befdc06febe43.html#gaea8d7735d41853167a2befdc06febe43" title="UNICENS initialization function.">Ucs_Init</a>(&amp;init_data, &amp;App_OnInitResult);</div>
<div class="line">}</div>
</div><!-- fragment --><table  class="dox_ic_table">
<tr>
<td id="dox_ic_started">&#160;</td><td>See also <em>Getting Started</em>, section <a class="el" href="_p__u_m__s_t_a_r_t_e_d__i_n_i_t.html">Initialization</a>. </td></tr>
</table>
<table  class="dox_ic_table">
<tr>
<td id="dox_ic_started">&#160;</td><td>See also <em>Getting Started</em>, section <a class="el" href="_p__u_m__s_t_a_r_t_e_d__s_u_p_v.html">Network Supervisor</a>. </td></tr>
</table>
<h2>General Events</h2>
<p>An application typically registers for the following general events:</p>
<ul>
<li>The network status callback function is typically used to notify when the network availability or the number of nodes changes. The application can use a mask to specify the events the callback shall be invoked.</li>
<li>The should register to routing events. Routing events are fired if a route was successfully built or destroyed.</li>
<li>If the peripheral bus interfaces are used on the local or remote INICs the respective GPIO trigger event callback is invoked after the node initialization or on GPIO event.</li>
</ul>
<table  class="dox_ic_table">
<tr>
<td id="dox_ic_started">&#160;</td><td>See also <em>Getting Started</em>, section <a class="el" href="_p__u_m__s_t_a_r_t_e_d__n_e_t.html">Network</a>. </td></tr>
</table>
<table  class="dox_ic_table">
<tr>
<td id="dox_ic_started">&#160;</td><td>See also <em>Getting Started</em>, section <a class="el" href="_p__u_m__s_t_a_r_t_e_d__r_m.html">Routing Management</a>. </td></tr>
</table>
<table  class="dox_ic_table">
<tr>
<td id="dox_ic_started">&#160;</td><td>See also <em>Getting Started</em>, section <a class="el" href="_p__u_m__s_t_a_r_t_e_d__p_e_r_i_p_h_e_r_a_l__b_u_s__i_n_t_e_r_f_a_c_e.html">Peripheral Bus Interface</a>. </td></tr>
</table>
<h2>Status Reports</h2>
<p>If the application logic requires information about the availability of nodes, it is possible to register an optional callback function <a class="el" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_gaa46122c2034804e753faed5e88cab76e.html#gaa46122c2034804e753faed5e88cab76e">supv.report_fptr</a>. This function is only triggered during Supervisor Normal Operation Mode. The following code shows simple implementation of this function.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> App_OnSupvReport(<a class="code" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga8e78be4d20f2bd14cccf1c5baa5cdc42.html#ga8e78be4d20f2bd14cccf1c5baa5cdc42" title="Supervisor Report Codes which are basically notified during Supervisor Normal Operation Mode...">Ucs_Supv_Report_t</a> code, <a class="code" href="struct_ucs___signature__t.html" title="This structure holds the signature of the Hello, Welcome and Signature messages. It supports the sign...">Ucs_Signature_t</a> *signature_ptr, </div>
<div class="line">                             <a class="code" href="struct_ucs___rm___node__t.html" title="Configuration structure of a Node.">Ucs_Rm_Node_t</a> *node_ptr, <span class="keywordtype">void</span> *user_ptr)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> * code_str = <span class="stringliteral">&quot;UNKNOWN&quot;</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span> (code)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga8e78be4d20f2bd14cccf1c5baa5cdc42.html#gga8e78be4d20f2bd14cccf1c5baa5cdc42a876d08bc31d5cfe91ac2f76d9b0e6967" title="A previously welcomed node became invalid and is no longer accessible in the network.">UCS_SUPV_REP_NOT_AVAILABLE</a>:</div>
<div class="line">            code_str = <span class="stringliteral">&quot;NOT_AVAILABLE&quot;</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga8e78be4d20f2bd14cccf1c5baa5cdc42.html#gga8e78be4d20f2bd14cccf1c5baa5cdc42a4b17882817ce853c91a3be2ea4ecc202" title="A discovered node is ignored due to a missing entry in the nodes_list_ptr, or since the desired node ...">UCS_SUPV_REP_IGNORED_UNKNOWN</a>:</div>
<div class="line">            code_str = <span class="stringliteral">&quot;IGNORED_UNKNOWN&quot;</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga8e78be4d20f2bd14cccf1c5baa5cdc42.html#gga8e78be4d20f2bd14cccf1c5baa5cdc42aacc9bfbc35f28729a5beb0aa6cd68980" title="A discovered node is ignored since it is a duplicate of an already welcomed node.">UCS_SUPV_REP_IGNORED_DUPLICATE</a>:</div>
<div class="line">            code_str = <span class="stringliteral">&quot;IGNORED_DUPLICATE&quot;</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga8e78be4d20f2bd14cccf1c5baa5cdc42.html#gga8e78be4d20f2bd14cccf1c5baa5cdc42afceb103e8452dea5810e6c3251b19404" title="A discovered node is welcomed. This code is informational. The application must wait until the welcom...">UCS_SUPV_REP_WELCOMED</a>:</div>
<div class="line">            code_str = <span class="stringliteral">&quot;WELCOMED&quot;</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga8e78be4d20f2bd14cccf1c5baa5cdc42.html#gga8e78be4d20f2bd14cccf1c5baa5cdc42a7dc6c21e855b38fed640fa7f6700c4ef" title="Failed to process the script which is referenced by the respective node object which was found in the...">UCS_SUPV_REP_SCRIPT_FAILURE</a>:</div>
<div class="line">            code_str = <span class="stringliteral">&quot;SCRIPT_FAILURE&quot;</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga8e78be4d20f2bd14cccf1c5baa5cdc42.html#gga8e78be4d20f2bd14cccf1c5baa5cdc42a95ebc68ebfe6c55d662bcc2708109c58" title="Failed to configure the node. Either the node synchronization or the node init script failed multiple...">UCS_SUPV_REP_IRRECOVERABLE</a>:</div>
<div class="line">            code_str = <span class="stringliteral">&quot;IRRECOVERABLE&quot;</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga8e78be4d20f2bd14cccf1c5baa5cdc42.html#gga8e78be4d20f2bd14cccf1c5baa5cdc42aa7b4fa83be50c0030f319e98344e571d" title="Successfully executed the init script of the node. This code is informational.">UCS_SUPV_REP_SCRIPT_SUCCESS</a>:</div>
<div class="line">            code_str = <span class="stringliteral">&quot;SCRIPT_SUCCESS&quot;</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___g___u_c_s___s_u_p_v___t_y_p_e_s_ga8e78be4d20f2bd14cccf1c5baa5cdc42.html#gga8e78be4d20f2bd14cccf1c5baa5cdc42a9c6011bcb264bf4566aed9c3ffa03d9f" title="A discovered node is now available and ready to be used by the application. The application is now al...">UCS_SUPV_REP_AVAILABLE</a>:</div>
<div class="line">            code_str = <span class="stringliteral">&quot;AVAILABLE&quot;</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (signature_ptr != NULL)</div>
<div class="line">    {</div>
<div class="line">        printf( <span class="stringliteral">&quot;App_OnSupvReport(): code=%s, node_addr=0x%04X, group_addr=0x%04X, node_ptr=0x%p\n&quot;</span>, </div>
<div class="line">                code_str, </div>
<div class="line">                signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a550e0ded0fb13bc58b087d3a162d43c7.html#a550e0ded0fb13bc58b087d3a162d43c7" title="NodeAddress.">node_address</a>,</div>
<div class="line">                signature_ptr-&gt;<a class="code" href="struct_ucs___signature__t_a20ed5721c4d2a493d8abd061950bd675.html#a20ed5721c4d2a493d8abd061950bd675" title="GroupAddress.">group_address</a>,</div>
<div class="line">                (<span class="keywordtype">void</span>*)node_ptr);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">&copy; 2019 Microchip Technology Inc. All rights reserved. <a href="http://www.microchip.com" target="_blank">www.microchip.com</a></li>
  </ul>
</div>
</body>
<!--
Generated on Wed Jun 19 2019 16:18:16 for UNICENS by
Doxygen 1.8.2
-->
<script language="javascript">
<!--
$('#MSearchResults').wrap('<div style="position: absolute; margin-left: 444px;"></div>');
-->
</script>
</html>
